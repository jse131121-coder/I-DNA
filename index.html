<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>DIDNA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { margin:0; font-family:sans-serif; background:#fffde7; }
    header { background:#fdd835; padding:12px; display:flex; justify-content:space-between; align-items:center; }
    #menuBtn { font-size:24px; background:none; border:none; cursor:pointer; }
    #menu { position:fixed; top:0; left:0; width:70%; height:100%; background:#fff;
            border-right:2px solid #ccc; padding:20px; display:none; flex-direction:column; gap:12px; }
    #menu button { font-size:18px; background:none; border:none; text-align:left; padding:8px; cursor:pointer; }
    main { padding:20px; }
    .section { display:none; }
    .active { display:block; }
    .chat-box { display:flex; flex-direction:column; gap:12px; }
    .bubble { max-width:78%; padding:10px; border-radius:12px; font-size:14px; }
    .bubble.left { align-self:flex-start; background:#e0f7fa; }
    .bubble.right { align-self:flex-end; background:#ffe0b2; }
    input, textarea { width:100%; margin:6px 0; padding:8px; border:1px solid #ccc; border-radius:8px; }
    button { padding:8px 12px; border:none; background:#fdd835; border-radius:8px; cursor:pointer; }
    .disabled { background:#ccc !important; cursor:not-allowed; }
    .feed-card { padding:12px; border:1px solid #ddd; border-radius:10px; background:#fff; margin-bottom:12px; }
  </style>
</head>
<body>
  <header>
    <h1>DIDNA</h1>
    <button id="menuBtn">☰</button>
  </header>

  <div id="menu">
    <button onclick="show('chat')">CHAT</button>
    <button onclick="show('feed')">FEED</button>
    <button onclick="show('write')">글쓰기</button>
    <button onclick="show('login')">로그인</button>
  </div>

  <main>
    <!-- 채팅 -->
    <section id="chat" class="section active">
      <h3>채팅</h3>
      <div class="chat-box" id="chatBox"></div>
      <input id="chatMessage" placeholder="메세지 입력" />
      <button onclick="sendMessage()">보내기</button>
    </section>

    <!-- 피드 -->
    <section id="feed" class="section">
      <h3>피드</h3>
      <div id="feedList">
        <div class="feed-card">예시 피드: 제목 / 내용</div>
      </div>
    </section>

    <!-- 글쓰기 -->
    <section id="write" class="section">
      <h3>글쓰기</h3>
      <input id="title" placeholder="제목" />
      <textarea id="content" placeholder="내용"></textarea>
      <input id="author" placeholder="작성자" />
      <button id="uploadBtn" onclick="submitPost()">업로드</button>
    </section>

    <!-- 로그인 -->
    <section id="login" class="section">
      <h3>로그인</h3>
      <input id="loginId" placeholder="아이디" />
      <input id="loginPw" type="password" placeholder="비밀번호" />
      <button onclick="login()">로그인</button>
      <button id="addAccountBtn" onclick="addAccount()" style="display:none;">계정 추가</button>
      <p id="loginStatus"></p>
    </section>
  </main>

  <script>
    let loggedIn = false;
    let accounts = [{id:"I-DNA", pw:"01012345678"}];

    const sections = document.querySelectorAll('.section');
    const menu = document.getElementById('menu');
    document.getElementById('menuBtn').onclick = () => {
      menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
    };
    function show(id) {
      sections.forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      menu.style.display = 'none';
      updateAccess();
    }

    function sendMessage() {
      const text = document.getElementById('chatMessage').value.trim();
      if (!text) return;
      if (!loggedIn) {
        alert("로그인 후 메시지가 표시됩니다.");
        document.getElementById('chatMessage').value = '';
        return;
      }
      const time = new Date().toLocaleTimeString();
      const bubble = document.createElement('div');
      bubble.className = 'bubble left'; // 로그인 시 왼쪽 말풍선
      bubble.innerHTML = text + '<br><span>(' + time + ')</span>';
      document.getElementById('chatBox').appendChild(bubble);
      document.getElementById('chatMessage').value = '';
    }

    function submitPost() {
      if (!loggedIn) {
        alert("로그인 후 이용 가능합니다.");
        return;
      }
      const title = document.getElementById('title').value;
      const content = document.getElementById('content').value;
      const author = document.getElementById('author').value;
      const card = document.createElement('div');
      card.className = 'feed-card';
      card.innerHTML = `<strong>${title}</strong><br>${content}<br>- ${author}`;
      document.getElementById('feedList').appendChild(card);
      alert("업로드 완료!");
      show('feed');
    }

    function login() {
      const id = document.getElementById('loginId').value.trim();
      const pw = document.getElementById('loginPw').value.trim();
      const status = document.getElementById('loginStatus');
      const found = accounts.find(acc => acc.id === id && acc.pw === pw);
      if (found) {
        loggedIn = true;
        status.textContent = "로그인 성공!";
        document.getElementById('addAccountBtn').style.display = 'block';
        show('chat');
      } else {
        loggedIn = false;
        status.textContent = "로그인 실패!";
      }
      updateAccess();
    }

    function addAccount() {
      const newId = prompt("새 아이디 입력:");
      const newPw = prompt("새 비밀번호 입력:");
      if (newId && newPw) {
        accounts.push({id:newId, pw:newPw});
        alert("계정 추가 완료!");
      }
    }

    function updateAccess() {
      const uploadBtn = document.getElementById('uploadBtn');
      if (uploadBtn) {
        uploadBtn.disabled = !loggedIn;
        uploadBtn.classList.toggle('disabled', !loggedIn);
      }
    }

    // 초기 화면
    show('chat');
  </script>
</body>
</html>

