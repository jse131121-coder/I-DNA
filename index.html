<!-- FULL MVP UPGRADE VERSION: Weverse-style community (static GitHub Pages) -->
<!-- Design preserved / Logic expanded -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CHAT</title>
  <style>
    /* âš ï¸ ê¸°ì¡´ ë””ìì¸ ìœ ì§€ â€“ êµ¬ì¡°/ìƒ‰ìƒ ë³€ê²½ ì—†ìŒ */
    body { margin:0; font-family: system-ui, -apple-system, BlinkMacSystemFont; background:#fffbe6; }
    header { padding:14px; font-weight:700; text-align:center; background:#fff3b0; }
    .hidden { display:none; }
    .wrap { max-width:520px; margin:0 auto; }
    .box { background:#fff; margin:12px; padding:12px; border-radius:14px; }
    button { border:none; padding:8px 12px; border-radius:10px; background:#ffe066; font-weight:600; cursor:pointer; }
    input, textarea { width:100%; padding:8px; margin-top:6px; border-radius:8px; border:1px solid #ddd; }
    .post { margin-top:10px; }
    .comment { font-size:14px; margin-left:8px; }
    .reply { margin-left:20px; font-size:13px; color:#555; }
    .meta { font-size:12px; color:#999; }
    .artist { color:#c92a2a; font-weight:700; }
    .actions { display:flex; gap:8px; margin-top:6px; }
  </style>
</head>
<body>
<header>CHAT</header>
<div class="wrap">

<!-- LOGIN -->
<div id="login" class="box">
  <input id="loginId" placeholder="ID" />
  <input id="loginPw" type="password" placeholder="PW" />
  <button onclick="login()">ë¡œê·¸ì¸</button>
</div>

<!-- MAIN -->
<div id="app" class="hidden">

  <!-- TOP BAR -->
  <div class="box">
    <span id="me"></span>
    <button onclick="openSetting()">âš™ï¸</button>
    <button id="addUserBtn" class="hidden" onclick="openAddUser()">â• ê³„ì • ì¶”ê°€</button>
  </div>

  <!-- WRITE POST -->
  <div id="writeBox" class="box hidden">
    <textarea id="postText" placeholder="ì•„í‹°ìŠ¤íŠ¸ì˜ ì´ì•¼ê¸°ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”"></textarea>
    <div class="actions">
      <button onclick="addPost()">ê²Œì‹œ</button>
      <button onclick="toggleNotice()">ğŸ“Œ ê³µì§€</button>
    </div>
  </div>

  <!-- FEED -->
  <div id="feed"></div>
</div>
</div>

<script>
/* ===== DATA ===== */
const defaultUsers = {
  arin:{pw:'1234', role:'artist', name:'ARIN', avatar:''},
  yerin:{pw:'1234', role:'artist', name:'YERIN', avatar:''},
  fan01:{pw:'1111', role:'fan', name:'fan01', avatar:''}
};
let users = JSON.parse(localStorage.getItem('users')) || defaultUsers;
let posts = JSON.parse(localStorage.getItem('posts')) || [];
let me = null;
let noticeMode = false;

/* ===== LOGIN ===== */
function login(){
  const id = loginId.value; const pw = loginPw.value;
  if(!users[id] || users[id].pw!==pw) return alert('ë¡œê·¸ì¸ ì‹¤íŒ¨');
  me = {id, ...users[id]};
  login.classList.add('hidden');
  app.classList.remove('hidden');
  meSpan();
  if(me.role==='artist') writeBox.classList.remove('hidden');
  if(id==='yerin') addUserBtn.classList.remove('hidden');
  render();
}

function meSpan(){
  me.innerHTML = `${me.avatar?`<img src='${me.avatar}' style='width:26px;height:26px;border-radius:50%;vertical-align:middle;margin-right:6px'>`:''}${me.name} ${me.role==='artist'?'ğŸ§‘â€ğŸ¤':''}`;
}

/* ===== POSTS ===== */
function addPost(){
  if(!postText.value) return;
  posts.unshift({
    id:Date.now(),
    author:me.id,
    text:postText.value,
    notice:noticeMode,
    comments:[],
    likes:[]
  });
  postText.value=''; noticeMode=false;
  save(); render();
}

function toggleNotice(){ noticeMode=!noticeMode; }

function addComment(pid, txt){
  const p = posts.find(p=>p.id===pid);
  p.comments.push({ author:me.id, text:txt, replies:[] });
  save(); render();
}

function addReply(pid, ci, txt){
  const p = posts.find(p=>p.id===pid);
  p.comments[ci].replies.push({ author:me.id, text:txt });
  save(); render();
}

function likePost(pid){
  const p = posts.find(p=>p.id===pid);
  if(p.likes.includes(me.id)) p.likes=p.likes.filter(i=>i!==me.id);
  else p.likes.push(me.id);
  save(); render();
}

/* ===== RENDER ===== */
function render(){
  feed.innerHTML='';
  posts.sort((a,b)=>b.notice-a.notice).forEach(p=>{
    const u = users[p.author];
    const div=document.createElement('div'); div.className='box post';
    div.innerHTML=`
      <div class="meta ${u.role==='artist'?'artist':''}">${u.name}${p.notice?' ğŸ“Œ':''}</div>
      <div>${p.text}</div>
      <div class="actions">
        <button onclick="likePost(${p.id})">â¤ï¸ ${p.likes.length}</button>
      </div>
      <div>
        ${p.comments.map((c,i)=>`
          <div class="comment"><b>${users[c.author].name}</b> ${c.text}
            ${me.role==='artist'?`<input placeholder='ë‹µê¸€' onkeydown="if(event.key==='Enter')addReply(${p.id},${i},this.value)" />`:''}
            ${c.replies.map(r=>`<div class="reply">${users[r.author].name}: ${r.text}</div>`).join('')}
          </div>
        `).join('')}
        <input placeholder="ëŒ“ê¸€" onkeydown="if(event.key==='Enter')addComment(${p.id},this.value)" />
      </div>`;
    feed.appendChild(div);
  });
}

/* ===== SETTINGS ===== */
function openSetting(){
  const name = prompt('ì´ë¦„ ë³€ê²½', me.name);
  const pw = prompt('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½', me.pw);
  const avatar = prompt('í”„ë¡œí•„ ì´ë¯¸ì§€ URL', me.avatar || '');
  if(name) { me.name=name; users[me.id].name=name; }
  if(pw) { me.pw=pw; users[me.id].pw=pw; }
  if(avatar!==null) { me.avatar=avatar; users[me.id].avatar=avatar; }
  save(); meSpan(); render();
}
}

function openAddUser(){
  if(me.id!=='yerin') return alert('ê¶Œí•œ ì—†ìŒ');
  const id=prompt('ID');
  const pw=prompt('PW');
  const role=prompt('fan / artist');
  const name=prompt('ì´ë¦„');
  if(id&&pw&&role){ users[id]={pw,role,name:name||id,avatar:''}; save(); alert('ê³„ì • ì¶”ê°€ ì™„ë£Œ'); }
}
}

function save(){
  localStorage.setItem('users',JSON.stringify(users));
  localStorage.setItem('posts',JSON.stringify(posts));
}
</script>
</body>
</html>




                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                 
