<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Community</title>
  <style>
    body { margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif; background:#fffef6; }
    .app { max-width:420px; margin:auto; padding:16px; }
    input, textarea, button { width:100%; padding:10px; margin-top:8px; border-radius:10px; border:1px solid #ddd; box-sizing:border-box; font-size:14px; }
    button { background:#ffe48a; border:none; font-weight:600; cursor:pointer; }
    h1 { font-size:20px; margin-bottom:12px; }
    .hidden { display:none; }
    .block { background:#fff4c2; border-radius:14px; padding:12px; margin-bottom:14px; }
    .row { display:flex; gap:10px; }
    .pf { width:36px; height:36px; border-radius:50%; background:#ddd; }
    .artist { color:#c79a00; font-weight:700; }
    .msg { background:white; border-radius:12px; padding:10px 12px; margin-top:6px; }
    .reply { margin-left:46px; margin-top:6px; background:#fff1a8; border-radius:10px; padding:8px 10px; font-size:13px; }
    .time { font-size:11px; color:#777; margin-top:4px; }
  </style>
</head>
<body>
<div class="app">

  <!-- LOGIN -->
  <div id="login">
    <h1>LOGIN</h1>
    <input id="loginId" placeholder="ID" />
    <input id="loginPw" type="password" placeholder="PASSWORD" />
    <button id="loginBtn">ENTER</button>
  </div>

  <!-- CHAT -->
  <div id="community" class="hidden">
    <h1>CHAT</h1>
    <div id="artistInput" class="hidden">
      <textarea id="artistText" placeholder="메시지 입력"></textarea>
      <button id="sendBtn">SEND</button>
    </div>
    <div id="feed"></div>
  </div>

</div>

<script>
// ===== 멤버십 유저 (프론트용) =====
const users = {
  arin: { pw: '1234', role: 'artist', name: 'BAEK ARIN' },
  yerin: { pw: '1234', role: 'artist', name: 'BAEK YE RIN' },
  fan01: { pw: '1111', role: 'fan', name: 'fan01' }
};

let currentUser = null;
let messages = JSON.parse(localStorage.getItem('messages') || '[]');

const loginBox = document.getElementById('login');
const communityBox = document.getElementById('community');
const artistInput = document.getElementById('artistInput');
const feed = document.getElementById('feed');

// ===== LOGIN =====
document.getElementById('loginBtn').onclick = () => {
  const id = loginId.value.trim();
  const pw = loginPw.value.trim();
  if (users[id] && users[id].pw === pw) {
    currentUser = users[id];
    loginBox.classList.add('hidden');
    communityBox.classList.remove('hidden');
    if (currentUser.role === 'artist') artistInput.classList.remove('hidden');
    render();
  } else {
    alert('로그인 실패');
  }
};

// ===== POST MESSAGE =====
document.getElementById('sendBtn').onclick = () => {
  const text = artistText.value.trim();
  if (!text) return;
  messages.unshift({
    author: currentUser.name,
    role: 'artist',
    text,
    time: new Date().toLocaleString(),
    comments: []
  });
  artistText.value = '';
  save();
  render();
};

function save() {
  localStorage.setItem('messages', JSON.stringify(messages));
}

// ===== RENDER =====
function render() {
  feed.innerHTML = '';
  messages.forEach((m, i) => {
    const block = document.createElement('div');
    block.className = 'block';
    block.innerHTML = `
      <div class="row">
        <div class="pf"></div>
        <div>
          <div class="artist">★ ${m.author}</div>
          <div class="msg">${m.text}</div>
          <div class="time">${m.time}</div>
        </div>
      </div>`;

    m.comments.forEach((c, j) => {
      const cDiv = document.createElement('div');
      cDiv.className = 'msg';
      cDiv.textContent = `${c.author} : ${c.text}`;
      block.appendChild(cDiv);

      if (c.reply) {
        const r = document.createElement('div');
        r.className = 'reply';
        r.textContent = `★ ${c.reply.author} : ${c.reply.text}`;
        block.appendChild(r);
      } else if (currentUser.role === 'artist') {
        const rInput = document.createElement('input');
        rInput.placeholder = '대댓글';
        rInput.onkeydown = e => {
          if (e.key === 'Enter') {
            c.reply = { author: currentUser.name, text: rInput.value };
            save(); render();
          }
        };
        block.appendChild(rInput);
      }
    });

    const input = document.createElement('input');
    input.placeholder = '댓글';
    input.onkeydown = e => {
      if (e.key === 'Enter') {
        m.comments.push({ author: currentUser.name, text: input.value });
        save(); render();
      }
    };
    block.appendChild(input);

    feed.appendChild(block);
  });
}
</script>
</body>
</html>



                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                 
