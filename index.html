<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AINI</title>

<style>
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont}
body{
  margin:0;
  background:#ffd6d6;
}
.hidden{display:none}

/* ë¡œê·¸ì¸ íŒì—… */
#loginModal{
  position:fixed; inset:0;
  background:rgba(0,0,0,.4);
  display:flex; align-items:center; justify-content:center;
}
#loginBox{
  background:#fff;
  padding:24px;
  width:280px;
  border-radius:18px;
  text-align:center;
}
#loginBox button{
  width:100%; margin-top:10px;
  padding:10px;
  border:none; border-radius:12px;
  background:#ff8a8a; color:#fff;
  font-weight:bold;
}

/* í—¤ë” */
header{
  padding:14px;
  background:#ffb3b3;
  display:flex; justify-content:space-between; align-items:center;
}
.badge{
  background:#000; color:#fff;
  padding:4px 10px; border-radius:20px;
  font-size:12px;
}

/* ë©”ì¸ */
main{padding:14px 14px 70px}
.card{
  background:#fff;
  border-radius:16px;
  padding:14px;
  margin-bottom:14px;
}

/* ì»¤ë®¤ë‹ˆí‹° */
.post{margin-bottom:16px}
.comment{font-size:13px;margin-top:6px}
.reply{margin-left:14px;color:#ff6b6b}

/* ì±„íŒ… */
.chat{
  background:#fff;
  border-radius:16px;
  padding:12px;
  height:60vh;
  overflow-y:auto;
}
.bubble{
  padding:10px;
  border-radius:14px;
  margin:6px 0;
  max-width:80%;
}
.me{background:#ff8a8a;color:#fff;margin-left:auto}
.other{background:#f2f2f2}

/* ì…ë ¥ */
.inputBox{
  position:fixed;
  bottom:60px; left:0; right:0;
  display:flex; padding:10px;
}
.inputBox input{
  flex:1; padding:10px;
  border-radius:20px; border:none;
}
.inputBox button{
  margin-left:8px;
  background:#ff8a8a;
  border:none; border-radius:20px;
  padding:0 16px; color:#fff;
}

/* í•˜ë‹¨ íƒ­ */
nav{
  position:fixed;
  bottom:0; left:0; right:0;
  display:flex;
  background:#ffecec;
}
nav button{
  flex:1;
  padding:12px;
  border:none;
  background:none;
}
</style>
</head>

<body>

<!-- ë¡œê·¸ì¸ -->
<div id="loginModal">
  <div id="loginBox">
    <h3>ë¡œê·¸ì¸</h3>
    <button onclick="login('fan')">íŒ¬ìœ¼ë¡œ ë¡œê·¸ì¸</button>
    <button onclick="login('artist')">ì•„í‹°ìŠ¤íŠ¸ë¡œ ë¡œê·¸ì¸</button>
  </div>
</div>

<header>
  <div>AINI ğŸ’—</div>
  <div id="role" class="badge"></div>
</header>

<main>
  <!-- í™ˆ -->
  <section id="home" class="card">í™˜ì˜í•©ë‹ˆë‹¤!</section>

  <!-- ì»¤ë®¤ë‹ˆí‹° -->
  <section id="community" class="hidden">
    <div class="card">
      <input id="postInput" placeholder="ê¸€ ì‘ì„±..." />
      <button onclick="addPost()">ë“±ë¡</button>
    </div>
    <div id="postList"></div>
  </section>

  <!-- ì±„íŒ… -->
  <section id="chat" class="hidden">
    <div class="chat" id="chatBox"></div>
    <div class="inputBox">
      <input id="chatInput" placeholder="ë©”ì‹œì§€ ì…ë ¥"/>
      <button onclick="sendChat()">send</button>
    </div>
  </section>

  <!-- í¸ì§€ -->
  <section id="letter" class="hidden">
    <div class="card">ğŸ’Œ í¸ì§€í•¨ (ì—°ì¶œìš©)</div>
  </section>
</main>

<nav>
  <button onclick="show('home')">í™ˆ</button>
  <button onclick="show('community')">ì»¤ë®¤ë‹ˆí‹°</button>
  <button onclick="show('chat')">ì±„íŒ…</button>
  <button onclick="show('letter')">í¸ì§€</button>
</nav>

<script>
let user = null;
let posts = JSON.parse(localStorage.getItem('posts')||'[]');
let chats = JSON.parse(localStorage.getItem('chats')||'[]');

function login(type){
  user = type;
  document.getElementById('role').innerText =
    type === 'artist' ? 'ARTIST âœ”' : 'FAN';
  document.getElementById('loginModal').style.display='none';
  render();
}

function show(id){
  document.querySelectorAll('main section')
    .forEach(s=>s.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

function addPost(){
  const text = postInput.value;
  if(!text) return;
  posts.push({text,comments:[]});
  localStorage.setItem('posts',JSON.stringify(posts));
  postInput.value='';
  render();
}

function addComment(i){
  const txt = prompt("ëŒ“ê¸€");
  if(!txt) return;
  posts[i].comments.push({text:txt,replies:[]});
  save();
}

function addReply(p,c){
  if(user!=='artist') return alert("ì•„í‹°ìŠ¤íŠ¸ë§Œ ê°€ëŠ¥");
  const txt = prompt("ëŒ€ëŒ“ê¸€");
  posts[p].comments[c].replies.push(txt);
  save();
}

function sendChat(){
  const t = chatInput.value;
  if(!t) return;
  chats.push({me:true,text:t});
  localStorage.setItem('chats',JSON.stringify(chats));
  chatInput.value='';
  render();
}

function save(){
  localStorage.setItem('posts',JSON.stringify(posts));
  render();
}

function render(){
  postList.innerHTML='';
  posts.forEach((p,i)=>{
    let html=`<div class="card post">${p.text}`;
    p.comments.forEach((c,ci)=>{
      html+=`<div class="comment">ğŸ’¬ ${c.text}
        ${user==='artist'?`<button onclick="addReply(${i},${ci})">â†³</button>`:''}
      </div>`;
      c.replies.forEach(r=>{
        html+=`<div class="reply">ARTIST âœ” ${r}</div>`;
      })
    })
    html+=`<button onclick="addComment(${i})">ëŒ“ê¸€</button></div>`;
    postList.innerHTML+=html;
  });

  chatBox.innerHTML='';
  chats.forEach(c=>{
    chatBox.innerHTML+=
      `<div class="bubble ${c.me?'me':'other'}">${c.text}</div>`;
  })
}
</script>

</body>
</html>

